Fixed the repository modify endpoint performance problems.
(backported from #9266)
