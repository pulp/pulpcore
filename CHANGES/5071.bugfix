Fixed a theoretical race condition leading to improper locking when dispatching tasks.
