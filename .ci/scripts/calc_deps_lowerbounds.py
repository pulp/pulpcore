# WARNING: DO NOT EDIT!
#
# This file was generated by plugin_template, and is managed by it. Please use
# './plugin-template --github pulpcore' to update this file.
#
# For more info visit https://github.com/pulp/plugin_template

from packaging.requirements import Requirement


# We install these from source, but it would be really handy if we could test pulpcore
# compatibility that way too.
EXCEPTIONS = [
    "pulpcore",
    "pulp_file".replace("-", "_"),
    "pulp-certguard".replace("-", "_"),
]


def main():
    """Calculate the lower bound of dependencies where possible."""
    with open("requirements.txt") as req_file:
        for line in req_file:
            try:
                requirement = Requirement(line)
            except ValueError:
                print(line.strip())
            else:
                if requirement.name.replace("-", "_") in EXCEPTIONS:
                    print(line.strip())
                else:
                    for spec in requirement.specifier:
                        if spec.operator == ">=":
                            min_version = str(spec)[2:]
                            print(f"{requirement.name}=={min_version}")
                            break
                    else:
                        print(line.strip())


if __name__ == "__main__":
    main()
